apt-get update && apt-get install -y build-essential libpq-devservices:
  - type: web
    name: Yeabkal
    env: python
    region: Frankfurt
    plan: free
    # This is the corrected line that fixes the error
    buildCommand: "apt-get update && apt-get install -y build-essential libpq-dev && pip install -r requirements.txt"
    startCommand: "gunicorn -w 4 -k uvicorn.workers.UvicornWorker api.main:app"
    healthCheckPath: /health
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: yeab-game-zone-db # Make sure this matches your DB name on Render
          property: connectionString
      - key: TELEGRAM_BOT_TOKEN
        sync: false
      - key: CHAPA_API_KEY
        sync: false
      - key: WEBHOOK_URL
        fromService:
          type: web
          name: Yeabkal
          property: url
      - key: BOT_OWNER_ID
        sync: false

databases:
  - name: yeab-game-zone-db # Make sure this matches the name used above
    databaseName: yeab_game_zone_db
    user: yeab_game_zone_user
    plan: freegit add render.yaml
git commit -m "Fix: Add system dependencies for asyncpg build"
git push